# r-fast-copy

Multithreaded copy tool implement by rust. Focus primarily on a large number of small files.

## Table of Contents

- [Install](#install)
- [Usage](#usage)
- [Benchmark](#benchmark)
- [License](#license)

## Install

You need to install the rust compiler toolchain first.

Run `cargo build --release` to compile.
Then you can add `target\release\r-fast-copy[.exe]` to your path.

## Usage

Run `cargo run -- -h` or `r-fast-copy -h` to get usage.

r-fast-Copy also provides a subcommand for generating test folder at a given location.

Run `cargo run -- gen-test-folder -h` or `r-fast-copy gen-test-foler -h` to get usage.

## Benchmark

The benchmark generated by copying same folder 3 times with different thread counts.

### Machine information

- CPU : Ryzen 5 3600
- HDD : WD Blue (WD10EZEX)
- SSD : WD Black SN750 (WDS100T3X0C-00SJG0)

### wsl-ssd (ms)

| time | single thread | 4 threads | 8 threads | 16 threads | 32 threads | 64 threads |
|------|--------------:|----------:|----------:|-----------:|-----------:|-----------:|
| 0    |          4844 |      2660 |      3160 |       2760 |       2208 |       1907 |
| 1    |          3369 |      1606 |      1807 |       1606 |       1406 |       1255 |
| 2    |          3163 |      1154 |      1304 |       1004 |       1005 |        954 |

### windows-hdd (ms)

| time | single thread | 4 threads | 8 threads | 16 threads | 32 threads | 64 threads |
|------|--------------:|----------:|----------:|-----------:|-----------:|-----------:|
| 0    |         14735 |      8427 |      8757 |       7805 |       9387 |      10209 |
| 1    |         20757 |     11037 |     11492 |      11899 |      13058 |      13792 |
| 2    |         27976 |     14809 |     16666 |      17161 |      17359 |      19059 |

## License

[MIT](LICENSE.md)
